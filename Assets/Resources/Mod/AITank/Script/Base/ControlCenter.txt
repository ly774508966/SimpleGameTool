local Module = require 'Mod.AITank.Script.Base.Tank.Module'
local control = Class("ControlCenter")

function control:ctor()
	self.tankset = {}
	self.modules = {}

	self.module = Module.new(self)

	LuaEventManager.AddUpdateEvent(nil, function()
		self:update()
	end)
end

function control:update()
	self.module:updateModule()
end

function control:addTank(tank)
	table.insert(self.tankset, tank)
end

function control:removeTank(tank)
	local j = 0
	for i,v in pairs(self.tankset) do
		local tmp = self.tankset[i]
		if tmp == tank then
			j = i
		end
	end
	
	if j == 0 then
		print(string.format("tank %s not found in tankset!", tank.name))
		return
	end

	table.remove(self.tankset, j)
end

function control:addTankSet(tankSet)
	for _,v in pairs(tankSet) do
		table.insert(self.tankset, v)
	end
end

return control